<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>QuantumultX on Shelken's Blog</title><link>https://blog.shelken.tk/-hugo-theme-stack/tags/quantumultx/</link><description>Recent content in QuantumultX on Shelken's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 01 Apr 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.shelken.tk/-hugo-theme-stack/tags/quantumultx/index.xml" rel="self" type="application/rss+xml"/><item><title>优雅地在B站客户端观看新番</title><link>https://blog.shelken.tk/-hugo-theme-stack/p/%E4%BC%98%E9%9B%85%E5%9C%B0%E5%9C%A8b%E7%AB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%A7%82%E7%9C%8B%E6%96%B0%E7%95%AA/</link><pubDate>Fri, 01 Apr 2022 00:00:00 +0000</pubDate><guid>https://blog.shelken.tk/-hugo-theme-stack/p/%E4%BC%98%E9%9B%85%E5%9C%B0%E5%9C%A8b%E7%AB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%A7%82%E7%9C%8B%E6%96%B0%E7%95%AA/</guid><description>&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/19CC3738-4345-4CAB-896F-A21B8B051B7C_1_201_a.jpeg" alt="Featured image of post 优雅地在B站客户端观看新番" />&lt;h2 id="声明">声明&lt;/h2>
&lt;p>不提供涉及 APP 的下载及其他使用教程&lt;/p>
&lt;h2 id="前提">前提&lt;/h2>
&lt;ol>
&lt;li>知道 QuanX 的基本使用逻辑，以及基本的概念&lt;/li>
&lt;li>有自我修改部分代码能力和上 github 或者其他托管代码平台的能力&lt;/li>
&lt;/ol>
&lt;h2 id="学习资源来源">学习资源来源&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/NobyDa/Script" title="脚本原作者仓库"
target="_blank" rel="noopener"
>脚本原作者仓库&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/NobyDa/Script/blob/master/Surge/JS/Bili_Auto_Regions.js" title="Bili_Auto_Region脚本"
target="_blank" rel="noopener"
>Bili_Auto_Region 脚本&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="效果">效果&lt;/h2>
&lt;h3 id="效果-1">效果 1&lt;/h3>
&lt;ol>
&lt;li>进入 B 站客户端&lt;/li>
&lt;li>进入『首页』，点击『追番』&lt;/li>
&lt;li>找到番剧『进击的巨人最终季』&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/19CC3738-4345-4CAB-896F-A21B8B051B7C_1_201_a.jpeg"
loading="lazy"
alt="19CC3738-4345-4CAB-896F-A21B8B051B7C_1_201_a"
>&lt;/li>
&lt;li>点击进入，脚本会自动将代理节点切换设置的代理分组&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/9C12ABCB-933D-4C5D-8660-390BAFF3631B_1_201_a.jpeg"
loading="lazy"
alt="9C12ABCB-933D-4C5D-8660-390BAFF3631B_1_201_a"
>&lt;/li>
&lt;li>如果出现『找不到页面』，点击页面的『重新加载』或刷新页面，进入番剧观看页面，正常观看&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/E0691890-CF30-4798-8B4C-4E3FBD6AB387_1_201_a.jpeg"
loading="lazy"
alt="E0691890-CF30-4798-8B4C-4E3FBD6AB387_1_201_a"
>&lt;/li>
&lt;li>退出观看页，脚本自动切换为直连&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/3D637A3B-F675-4DA0-B67E-E697B6FB1953_1_201_a.jpeg"
loading="lazy"
alt="3D637A3B-F675-4DA0-B67E-E697B6FB1953_1_201_a"
>&lt;/li>
&lt;/ol>
&lt;h3 id="效果-2">效果 2&lt;/h3>
&lt;ol>
&lt;li>进入 B 站客户端&lt;/li>
&lt;li>点击『输入框』&lt;/li>
&lt;li>输入『进击的巨人 港』&lt;/li>
&lt;li>脚本自动切换代理分组&lt;/li>
&lt;li>页面显示『进击的巨人』番剧结果&lt;img src="https://shelken-bucket.oss-cn-hongkong.aliyuncs.com/uPic/941D38C8-4229-4899-9A34-9A25D070B229_1_201_a.jpeg"
loading="lazy"
alt="941D38C8-4229-4899-9A34-9A25D070B229_1_201_a"
>&lt;/li>
&lt;li>点击『立即观看』，进入观看页&lt;/li>
&lt;/ol>
&lt;h2 id="优点">优点&lt;/h2>
&lt;ul>
&lt;li>不用再每次看港澳台番剧时自己手动切成全局，看完后又切换回规则模式，全自动。&lt;/li>
&lt;/ul>
&lt;h2 id="实践">实践&lt;/h2>
&lt;h3 id="准备">准备&lt;/h3>
&lt;ul>
&lt;li>带有 ios 系统的 iPhone&lt;/li>
&lt;li>一个 QuanX App&lt;/li>
&lt;li>『Bili_Auto_Region 脚本』&lt;/li>
&lt;/ul>
&lt;h3 id="修改原有脚本">修改原有脚本&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>到『脚本原作者仓库』，fork 该仓库&lt;/p>
&lt;/li>
&lt;li>
&lt;p>加入『StreamingSE』规则集（必须）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 绑定相关select或static策略组，并且需要具有相关的区域代理服务器纳入您的子策略中，子策略可以是服务器也可以是其他区域策略组．
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/StreamingMedia/StreamingSE.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>设置该规则集的『策略偏好』为自己的『父策略组』（例如我设为 『BiliGroup』）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>添加几个子策略组（如台湾 or 香港）（这里涉及到策略组的节点选择策略，自己了解）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>修改 &lt;strong>Surge/JS/Bili_Auto_Regions.js&lt;/strong>，提交更改&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//找到如下代码块，删除如下中文，修改成自己创建的策略组名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">Group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_Policy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;你的父策略组（BiliGroup）&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Your blibli policy group name.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">CN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_CN&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;DIRECT&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Your China sub-policy name.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">TW&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_TW&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;台湾子策略组&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Your Taiwan sub-policy name.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">HK&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_HK&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;香港子策略组&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Your HongKong sub-policy name.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">DF&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_DF&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;请求失败后的策略组&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//Sub-policy name used after region is blocked(e.g. url 404)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;BiliArea_disabled&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;在某些wifi下不转换策略组&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//WiFi blacklist(disable region change), separated by commas.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">current&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getPolicy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Group&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在 &lt;strong>QuantumultX/&lt;/strong> 目录下（或其他目录），新增两个文件，一个『分流』，一个『重写』，举例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#『重写』引用：Bili_Region.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># start-------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hostname = ap?.bilibili.com, ap?.biliapi.net
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^https:\/\/ap(p|i)\.bili(bili|api)\.(com|net)\/(pgc\/view\/v\d\/app\/season|x\/v\d\/search\/defaultwords)\?access_key url script-response-body https://raw.githubusercontent.com/你的用户名/Script/master/Surge/JS/Bili_Auto_Regions.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 适用于搜索指定地区的番剧（该脚本为『效果2』的实现，根据自身需要选择）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^https:\/\/ap(p|i)\.bili(bili|api)\.(com|net)\/x\/v\d\/search(\/type)?\?.+?%20(%E6%B8%AF|%E5%8F%B0|%E4%B8%AD)&amp;amp; url script-request-header https://raw.githubusercontent.com/你的用户名/Script/master/Surge/JS/Bili_Auto_Regions.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># end--------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#『分流』引用：Bili_Region.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># start-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-cidr, 203.107.1.1/24, reject
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># end--------------------
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>打开 App；将以上两个文件『分流』与『重写』分别引用；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最后，在 QuanX -&amp;gt; 其他设置 -&amp;gt; VPN 中，关闭 MPM（温和策略机制）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>至此，所有需要做的都已经完成，此时，进入 B 站客户端，实现以上的效果&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="why">Why？&lt;/h2>
&lt;blockquote>
&lt;p>为什么？这部分将对『实践』中的部分操作做解释。&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>为什么 fork 仓库？&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">因为需要修改原脚本相关分组的名字，这部分由自己定义；而且涉及到『重写』与『分流』引用，虽然不是必须，但是强烈建议这样做；可以方便地管理这些规则的开关；
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>为什么关闭 MPM&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要是在切换策略时打断之前的连接，让策略生效（个人认为）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="已知问题">已知问题&lt;/h2>
&lt;ol>
&lt;li>在长时间使用 B 站一段时间后，会发现脚本有失效情况，这个时候退出 B 站重新进入可以解决。&lt;/li>
&lt;/ol>
&lt;h2 id="最后">最后&lt;/h2>
&lt;p>如果有代码方面的时候问题，请到原作者脚本仓库上提 issue。&lt;/p>
&lt;p>如果有关于以上实践部分的问题，可以在下方评论提问。本教程也是参考了原脚本的注释部分，自己实践得来，建议在问之前把注释看一遍；不提供除实践部分之外的问题。如果是我知道的，我会提供关键词给你，然后请自己去问谷歌。&lt;/p></description></item></channel></rss>